file: script.sh
name: describe-nodes
description: Provide the full functionality of `oc describe nodes`, as the standard `oc describe nodes` in backplane restricts access to customer workload information.
author: dsquirre
allowedGroups:
  - SREP
  - CEE
  - LPSRE
  - MCSTierTwo
rbac:
  roles:
    - namespace: "kube-node-lease"
      rules:
        - apiGroups: ['coordination.k8s.io']
          resources: ['leases']
          verbs: ['get', 'list']
  clusterRoleRules:
    - apiGroups: ['']
      resources: ['nodes']
      verbs: ['get', 'list']
    - apiGroups: ['']
      resources: ['pods']
      verbs: ['get', 'list']
envs:
  - key: "ALL"
    description: "Describe all nodes in the cluster"
    optional: true
  - key: "MASTER"
    description: "Describe the master nodes in the cluster"
    optional: true
  - key: "INFRA"
    description: "Describe the infra nodes in the cluster"
    optional: true
  - key: "WORKER"
    description: "Describe the worker nodes in the cluster"
    optional: true
  - key: "NODES"
    description: "Describe the comma separated list ofspecified nodes"
    optional: true
  - key: "SELECTOR"
    description: "Label selector to describe specified nodes"
    optional: true
  - key: "DEBUG"
    description: "Enable debugged output"
    optional: true
language: bash
labels:
  - key: OSD_TYPES
    description: Compatible cluster types for this script
    values:
      - OSD
      - HyperShift
    optional: true
customerDataAccess: true
